<!doctype html>

<title>Visual inspiration</title>

<meta charset="utf-8" />

<style>
  .canvas {
    position: relative;
    border: 1px solid black;
    height: 400px;
  }

  .canvas > .image {
    position: absolute;
  }
</style>

<div class="canvas">{{# images }}
  <img
    async
    class="image"
    src="/images/thumbnails/{{{ path }}}"
    style="
      z-index: {{ zIndex }};
      left: {{ x }}px;
      top: {{ y }}px;
    "
  />{{/ images }}
</div>

<script type="module">
  fetch("/", {
    method: "POST",
    body: JSON.stringify([ "TEST", {
      path: "path/to/file",
      x: 0,
      y: 0,
    }])
  });

  for (const image of document.querySelectorAll(".image")) {
    image.addEventListener("mousedown", down_event => {
      down_event.preventDefault();

      const move = event => {
        image.style.top = `${event.y}px`;
        image.style.left = `${event.x}px`;
      };

      document.addEventListener("mousemove", move);

      document.addEventListener("mouseup", () => {
        document.removeEventListener("mousemove", move);
      })
    })
  }
</script>
